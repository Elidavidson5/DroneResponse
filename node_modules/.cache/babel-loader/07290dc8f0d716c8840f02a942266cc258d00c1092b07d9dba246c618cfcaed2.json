{"ast":null,"code":"var _jsxFileName = \"/Users/elidavidson/Desktop/hiloscope/src/UI/Home/Map.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { MapContainer, TileLayer, Marker, Popup, Circle, useMap, Polyline, Tooltip } from 'react-leaflet';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport drone from '../images/drone.png';\nimport waypointpoint from '../images/pin.png';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Map() {\n  _s();\n  const [location, setLocation] = useState(null);\n  const [userLocation, setUserLocation] = useState(null);\n  const [error, setError] = useState(null);\n  const [markers, setMarkers] = useState([]);\n  const [selectedMarkerId, setSelectedMarkerId] = useState(null); // Track the selected marker\n\n  const circleCenter = userLocation || [33.6411, -117.8425];\n  useEffect(() => {\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(position => {\n        const {\n          latitude,\n          longitude\n        } = position.coords;\n        setLocation({\n          latitude,\n          longitude\n        });\n        setUserLocation([latitude, longitude]);\n      }, error => {\n        setError(error.message);\n      });\n    } else {\n      setError('Geolocation is not supported by this browser.');\n    }\n  }, []);\n  const handleMapClick = event => {\n    const {\n      lat,\n      lng\n    } = event.latlng;\n    setMarkers(prevMarkers => [...prevMarkers, {\n      id: prevMarkers.length + 1,\n      lat,\n      lng\n    }]);\n  };\n  const markerIcon = new L.Icon({\n    iconUrl: drone,\n    iconSize: [32, 32],\n    iconAnchor: [16, 32],\n    popupAnchor: [0, -32]\n  });\n  const waypointIcon = new L.Icon({\n    iconUrl: waypointpoint,\n    iconSize: [32, 32],\n    iconAnchor: [16, 32],\n    popupAnchor: [0, -32]\n  });\n  const highlightedIcon = new L.Icon({\n    iconUrl: waypointpoint,\n    iconSize: [40, 40],\n    // Larger size for highlighting\n    iconAnchor: [20, 40],\n    popupAnchor: [0, -40],\n    className: 'highlighted-icon' // Optional custom styling\n  });\n  const handleMarkerClick = markerId => {\n    setSelectedMarkerId(markerId); // Set the selected marker\n  };\n  const handleDragEnd = (event, index) => {\n    const newLatLng = event.target.getLatLng();\n    setMarkers(prevMarkers => {\n      const updatedMarkers = [...prevMarkers];\n      updatedMarkers[index] = {\n        ...updatedMarkers[index],\n        lat: newLatLng.lat,\n        lng: newLatLng.lng\n      };\n      return updatedMarkers;\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"w-full\",\n    children: userLocation ? /*#__PURE__*/_jsxDEV(MapContainer, {\n      style: {\n        height: '500px',\n        width: '100%'\n      },\n      center: userLocation,\n      zoom: 14,\n      scrollWheelZoom: false,\n      onClick: handleMapClick,\n      children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n        attribution: \"\\xA9 <a href=\\\"https://www.openstreetmap.org/copyright\\\">OpenStreetMap</a> contributors\",\n        url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Marker, {\n        position: userLocation,\n        icon: markerIcon,\n        children: /*#__PURE__*/_jsxDEV(Popup, {\n          children: \"Your Current location\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Circle, {\n        center: circleCenter,\n        radius: 1609.34,\n        color: \"blue\",\n        fillColor: \"blue\",\n        fillOpacity: 0.2\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 21\n      }, this), markers.map((marker, index) => /*#__PURE__*/_jsxDEV(Marker, {\n        position: [marker.lat, marker.lng],\n        icon: marker.id === selectedMarkerId ? highlightedIcon : waypointIcon,\n        draggable: true,\n        eventHandlers: {\n          click: () => handleMarkerClick(marker.id),\n          dragend: e => handleDragEnd(e, index)\n        },\n        children: [/*#__PURE__*/_jsxDEV(Popup, {\n          children: [\"Waypoint \", marker.id, \": \", marker.lat, \", \", marker.lng]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n          permanent: true,\n          children: index + 1\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 29\n        }, this)]\n      }, marker.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 25\n      }, this)), markers.length > 1 && /*#__PURE__*/_jsxDEV(Polyline, {\n        positions: markers.map(marker => [marker.lat, marker.lng]),\n        color: \"red\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading user location...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 9\n  }, this);\n}\n_s(Map, \"3015UgLTDWtI22vqXixlxe87xW0=\");\n_c = Map;\nvar _c;\n$RefreshReg$(_c, \"Map\");","map":{"version":3,"names":["React","useState","useEffect","MapContainer","TileLayer","Marker","Popup","Circle","useMap","Polyline","Tooltip","L","drone","waypointpoint","jsxDEV","_jsxDEV","Map","_s","location","setLocation","userLocation","setUserLocation","error","setError","markers","setMarkers","selectedMarkerId","setSelectedMarkerId","circleCenter","navigator","geolocation","getCurrentPosition","position","latitude","longitude","coords","message","handleMapClick","event","lat","lng","latlng","prevMarkers","id","length","markerIcon","Icon","iconUrl","iconSize","iconAnchor","popupAnchor","waypointIcon","highlightedIcon","className","handleMarkerClick","markerId","handleDragEnd","index","newLatLng","target","getLatLng","updatedMarkers","children","style","height","width","center","zoom","scrollWheelZoom","onClick","attribution","url","fileName","_jsxFileName","lineNumber","columnNumber","icon","radius","color","fillColor","fillOpacity","map","marker","draggable","eventHandlers","click","dragend","e","permanent","positions","_c","$RefreshReg$"],"sources":["/Users/elidavidson/Desktop/hiloscope/src/UI/Home/Map.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { MapContainer, TileLayer, Marker, Popup, Circle, useMap, Polyline, Tooltip } from 'react-leaflet';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport drone from '../images/drone.png';\nimport waypointpoint from '../images/pin.png';\n\nexport default function Map() {\n    const [location, setLocation] = useState(null);\n    const [userLocation, setUserLocation] = useState(null);\n    const [error, setError] = useState(null);\n    const [markers, setMarkers] = useState([]);\n    const [selectedMarkerId, setSelectedMarkerId] = useState(null); // Track the selected marker\n\n    const circleCenter = userLocation || [33.6411, -117.8425];\n\n    useEffect(() => {\n        if (navigator.geolocation) {\n            navigator.geolocation.getCurrentPosition(\n                (position) => {\n                    const { latitude, longitude } = position.coords;\n                    setLocation({ latitude, longitude });\n                    setUserLocation([latitude, longitude]);\n                },\n                (error) => {\n                    setError(error.message);\n                }\n            );\n        } else {\n            setError('Geolocation is not supported by this browser.');\n        }\n    }, []);\n\n    const handleMapClick = (event) => {\n        const { lat, lng } = event.latlng;\n        setMarkers((prevMarkers) => [\n            ...prevMarkers,\n            { id: prevMarkers.length + 1, lat, lng },\n        ]);\n    };\n\n    const markerIcon = new L.Icon({\n        iconUrl: drone,\n        iconSize: [32, 32],\n        iconAnchor: [16, 32],\n        popupAnchor: [0, -32],\n    });\n\n    const waypointIcon = new L.Icon({\n        iconUrl: waypointpoint,\n        iconSize: [32, 32],\n        iconAnchor: [16, 32],\n        popupAnchor: [0, -32],\n    });\n\n    const highlightedIcon = new L.Icon({\n        iconUrl: waypointpoint,\n        iconSize: [40, 40], // Larger size for highlighting\n        iconAnchor: [20, 40],\n        popupAnchor: [0, -40],\n        className: 'highlighted-icon', // Optional custom styling\n    });\n\n    const handleMarkerClick = (markerId) => {\n        setSelectedMarkerId(markerId); // Set the selected marker\n    };\n\n    const handleDragEnd = (event, index) => {\n        const newLatLng = event.target.getLatLng();\n        setMarkers((prevMarkers) => {\n            const updatedMarkers = [...prevMarkers];\n            updatedMarkers[index] = { ...updatedMarkers[index], lat: newLatLng.lat, lng: newLatLng.lng };\n            return updatedMarkers;\n        });\n    };\n\n    return (\n        <div className='w-full'>\n            {userLocation ? (\n                <MapContainer\n                    style={{ height: '500px', width: '100%' }}\n                    center={userLocation}\n                    zoom={14}\n                    scrollWheelZoom={false}\n                    onClick={handleMapClick}\n                >\n                    <TileLayer\n                        attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n                        url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n                    />\n\n                    <Marker position={userLocation} icon={markerIcon}>\n                        <Popup>Your Current location</Popup>\n                    </Marker>\n\n                    <Circle center={circleCenter} radius={1609.34} color=\"blue\" fillColor=\"blue\" fillOpacity={0.2} />\n\n                    {markers.map((marker, index) => (\n                        <Marker\n                            key={marker.id}\n                            position={[marker.lat, marker.lng]}\n                            icon={marker.id === selectedMarkerId ? highlightedIcon : waypointIcon}\n                            draggable={true}\n                            eventHandlers={{\n                                click: () => handleMarkerClick(marker.id),\n                                dragend: (e) => handleDragEnd(e, index),\n                            }}\n                        >\n                            <Popup>\n                                Waypoint {marker.id}: {marker.lat}, {marker.lng}\n                            </Popup>\n                            <Tooltip permanent>{index + 1}</Tooltip>\n                        </Marker>\n                    ))}\n\n                    {markers.length > 1 && (\n                        <Polyline positions={markers.map((marker) => [marker.lat, marker.lng])} color=\"red\" />\n                    )}\n                </MapContainer>\n            ) : (\n                <p>Loading user location...</p>\n            )}\n        </div>\n    );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}